      <% IF is_url(release.resources.homepage) %><li><a class="nopopup" href="<% release.resources.homepage %>">Homepage</a></li><% END %>
      <% IF release.resources.repository %>
      <li>
        <% IF is_url(release.resources.repository.web) %>
        <a href="<% release.resources.repository.web %>">Repository</a>
        <% END %>
        <% IF is_url(release.resources.repository.web) && is_url(release.resources.repository.url) %>
        (<a href="<% release.resources.repository.url %>"><% release.resources.repository.type %> clone</a>)
        <% ELSIF is_url(release.resources.repository.url) %>
        <a href="<% release.resources.repository.url %>">Clone <% release.resources.repository.type %> repository</a>
        <% END %>
      </li>
      <% END %>
      <li><a href="<%
        IF is_url(release.resources.bugtracker.web);
          release.resources.bugtracker.web;
        ELSIF release.resources.bugtracker.mailto;
          'mailto:' _ release.resources.bugtracker.mailto;
        ELSE;
          'https://rt.cpan.org/Public/Dist/Display.html?Name=' _ release.distribution;
        END;
      %>">Bugs</a><% IF distribution.bugs %> (<% distribution.bugs.active %>)<% END %></li>
      <% IF rating.count > 0 %>
      <li><% INCLUDE inc/rating.html rating = rating, distribution = release.distribution %></li>
      <% END %>
      <li><a href="<% 'http://cpanratings.perl.org/rate/?distribution=' _ release.distribution %>">Rate this distribution</a></li>
      <li>
<!-- IF user_exists -->
        <a href="#" onclick="$('#recommendation-box').toggle(); return false">Recommend alternative</a>
<!-- ELSE %>
        <a href="#" onclick="alert('Please sign in to make recommendation'); return false">Recommend alternative</a>
< END %>-->

        <div id="recommendation-box" style="display: none">
            <input type="text" id="recommendation-input" />
            <script>
            $(function(){
    var recommendations;
    $('#recommendation-input').keyup(function(event) {
        // if up/down arrow is released
        if (event.keyCode == '38' || event.keyCode == '40') {
            // get the currently hovered query
            var query = $('.ac_over').text();
            if (query) {
                $('#recommendation-input').val(query);
            }
        }
    });

    $("#recommendation-input").autocomplete('/search/autocomplete', {
        dataType: 'json',
        delay: 100,
        max: 20,
        selectFirst: false,
        width: $("#recommendation-input").width() + 5,
        parse: function(data) {
            var result = $.map(data, function(row) {
                return {
                    data: row,
                    value: row.documentation,
                    result: row.documentation
                }
            });
            var uniq = {};
            result = $.grep(result, function(row) {
                uniq[row.result] = typeof(uniq[row.result]) == 'undefined' ? 0 : uniq[row.result];
                return uniq[row.result]++ < 1;
            });
            return recommendations = result;
        },
        formatItem: function(item) {
            return item.documentation;
        }
    }).result(function(e, item) {
    });

    $('#recommendation-input.autofocus').focus();

    $('#recommendation-input').keydown(function(event) {
        if (event.keyCode == '13') {
            event.preventDefault();

            var module = $('#recommendation-input').val();

            // WARNING: that matches potentially both autocomplete
            // results. But since both are module names, should be okay-ish
            // for now... But please, let's fix that later
            var $ac = $('.ac_results');

            var matched = 0;
            $ac.find('li').each(function(){
                if( $(this).text() == module ) {
                    matched++;
                }
            });

            if(!matched) {
                return;
            }

             $('#recommendation-input').attr('disabled',true)

            $.post(
                '/account/recommend/'+'<% module.documentation %>'+'/alternative/'+module,
                function(){
                    $('#recommendation-box').hide(400);
                    $('#recommendation-input').attr('disabled',false)
                }
            );
        }
    });
    });
    </script>
        </div>
      </li>
      <li>
          <a href="http://www.cpantesters.org/distro/<% release.distribution.chunk(1).0.uc     %>/<% release.distribution %>.html#<% release.name %>" title="(pass / fail / na)">Test results</a>
          <% IF release.tests.size %>(<span style="color: #090"><% release.tests.pass %></span> / <span style="color: #900"><% release.tests.fail %></span> / <% release.tests.na %>)<% END %>
          <a href="http://matrix.cpantesters.org/?dist=<% release.distribution %>+<% release.version %>" title="Matrix"><img src="/static/icons/grid.png" width="16" height="16" style="vertical-align: bottom; padding: 1px"></a>
      </li>
      <li><a href="http://cpants.charsbar.org/dist/overview/<% release.distribution %>">CPANTS</a></li>
      <% IF release.license %><li>License: <% release.license.join(', ') %></li><% END %>
    <% IF versions.size > 1 %>
    <select name="release" onchange="document.location.href='/<% IF module.path; 'module'; ELSE; 'release'; END %>/' + this.value">
    <option>Go to version</option>
    <%
    BLOCK version_options;
    backpan = [];
    FOREACH version IN versions;
        IF release.name == version.name;
            NEXT;
        END;
        IF version.status == 'backpan';
            backpan.push(version);
            NEXT;
        END %>
    <option value="<% version.author; '/'; version.name; '/'; module.path %>"><% version.version _ (version.maturity == 'developer' ? ' DEV' : '') %> (<% version.date.dt_date_common %>)</option>
    <% END; IF backpan.size %>
    <optgroup label="BackPAN"></optgroup>
    <% FOREACH version IN backpan %>
    <option value="<% version.author; '/'; version.name; '/'; module.path %>"><% version.version _ (version.maturity == 'developer' ? ' DEV' : '') %> (<% version.date.dt_date_common %>)</option><% END %>
    <% END; END; PROCESS version_options %>
    </select>
    <% END %>
